!function(a,b){"function"==typeof define&&define.amd?define(function(){return b(a,a.document)}):"object"==typeof module&&module.exports?module.exports=b(a,a.document):(void 0===a.tail&&(a.tail={}),a.tail.DateTime=a.tail.datetime=b(a,a.document),"undefined"!=typeof jQuery&&(jQuery.fn.DateTime=jQuery.fn.datetime=function(b){var c,a=[];return this.each(function(){!1!==(c=tail.DateTime(this,b))&&a.push(c)}),1===a.length?a[0]:0!==a.length&&a}),"undefined"!=typeof MooTools&&(Element.implement({DateTime:function(a){return new tail.DateTime(this,a)}}),Element.implement({datetime:function(a){return new tail.DateTime(this,a)}})))}(window,function(c,b){"use strict";function d(a,b){return!!a&&"classList"in a&&a.classList.contains(b)}function e(a,b){return a&&"classList"in a?a.classList.add(b):void 0}function f(a,b){return a&&"classList"in a?a.classList.remove(b):void 0}function g(e,d,a){if(CustomEvent&&CustomEvent.name)var c=new CustomEvent(d,a);else{var c=b.createEvent("CustomEvent");c.initCustomEvent(d,!!a.bubbles,!!a.cancelable,a.detail)}return e.dispatchEvent(c)}function h(b,c){if("function"==typeof Object.assign)return Object.assign({},b,c||{});var d=Object.constructor();for(var a in b)d[a]=a in c?c[a]:b[a];return d}function i(d,a){var c=b.createElement(d);return c.className=a&&a.join?a.join(" "):a||"",c}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function k(b,c,d){var a=b instanceof Date?b:!!b&&new Date(b);return!(!(a instanceof Date)||isNaN(a.getDate()))&&(d&&a.setHours(0,0,0,0),!0===c?a.getTime():a)}b.forms.inputmode=!0;var a=function(c,d){if((c="string"==typeof c?b.querySelectorAll(c):c)instanceof NodeList||c instanceof HTMLCollection||c instanceof Array){for(var e=[],i=c.length,f=0;f<i;f++)e.push(new a(c[f],d));return 1===e.length?e[0]:0!==e.length&&e}if(!(c instanceof Element))return!1;if(!(this instanceof a))return new a(c,d);if(a.inst[c.getAttribute("data-tail-datetime")])return a.inst[c.getAttribute("data-tail-datetime")];if(c.getAttribute("data-datetime")){var g=JSON.parse(c.getAttribute("data-datetime").replace(/\'/g,'"'));g instanceof Object&&(d=h(d,g))}return this.e=c,this.id=++a.count,this.con=h(a.defaults,d),a.inst["tail-"+this.id]=this,this.e.setAttribute("data-tail-datetime","tail-"+this.id),this.init()};return a.version="0.4.14",a.status="beta",a.count=0,a.inst={},a.defaults={animate:!0,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,time12h:!1,timeFormat:"HH:ii:ss",timeHours:!0,timeMinutes:!0,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0},a.strings={en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shorts:["SUN","MON","TUE","WED","THU","FRI","SAT"],time:["Hours","Minutes","Seconds"],header:["Select a Month","Select a Year","Select a Decade","Select a Time"]},modify:function(b,a,c){if(!(b in this))return!1;if(a instanceof Object)for(var d in a)this.modify(b,d,a[d]);else this[b][a]="string"==typeof c?c:this[b][a];return!0},register:function(a,b){return"string"==typeof a&&b instanceof Object&&(this[a]=b,!0)}},a.prototype={init:function(){this.prepare();var c=this.__.shorts.slice(this.con.weekStart).concat(this.__.shorts.slice(0,this.con.weekStart));this.weekdays="<thead>\n<tr>\n";for(var a=0;a<7;a++)this.weekdays+='<th class="calendar-week">'+c[a]+"</th>";this.weekdays+="\n</tr>\n</thead>",this.select=k(this.e.getAttribute("data-value")||this.e.value),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),void 0==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date});for(var b=["Hours","Minutes","Seconds"],a=0;a<3;a++)if("number"==typeof this.con["time"+b[a]])this.view.date["set"+b[a]](this.con["time"+b[a]]);else for(;this.view.date["get"+b[a]]()%this.con["timeStep"+b[a]]!=0;)this.view.date["set"+b[a]](this.view.date["get"+b[a]]()+1);return this.ampm=!!this.con.time12h&&this.view.date.getHours()>12,this.events={},this.dt=this.renderCalendar(),this.con.startOpen&&this.open(),this.select&&this.selectDate(this.select),this.bind()},prepare:function(){if(this.__=h(a.strings.en,a.strings[this.con.locale]||{}),this.con.dateStart=k(this.con.dateStart,!0,!0)|| -9999999999999,this.con.dateEnd=k(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.dateFormat?this.con.viewDefault:"time","string"==typeof this.con.weekStart&&(this.con.weekStart=a.strings.en.shorts.indexOf(this.con.weekStart)),this.con.weekStart<0&&this.con.weekStart>6&&(this.con.weekStart=0),this.con.dateRanges.length>0){for(var l,g=[],d=this.con.dateRanges,i=d.length,c=0;c<i;c++)d[c]instanceof Object&&(d[c].start||d[c].days)&&(!1===(d[c].start=k(d[c].start||!1,!0,!0))?d[c].start=d[c].end=1/0:(!1===(d[c].end=k(d[c].end||!1,!0,!0))&&(d[c].end=d[c].start),d[c].start=d[c].start>d[c].end?(l=d[c].end,d[c].end=d[c].start,l):d[c].start),d[c].days=!("days"in d[c])||d[c].days,d[c].days="boolean"!=typeof d[c].days?function(c){for(var d=[],e=c.length,b=0;b<e;b++)"string"==typeof c[b]&&(c[b]=a.strings.en.shorts.indexOf(c[b])),c[b]>=0&&c[b]<=6&&d.push(c[b]);return d}(d[c].days instanceof Array?d[c].days:[d[c].days]):[0,1,2,3,4,5,6],g.push({start:d[c].start,end:d[c].end,days:d[c].days}));this.con.dateRanges=g}if(this.con.tooltips.length>0){for(var j,f,d,g=[],e=this.con.tooltips,i=e.length,c=0;c<i;c++)e[c]instanceof Object&&e[c].date&&(e[c].date instanceof Array?(f=k(e[c].date[0]||!1,!0,!0),d=k(e[c].date[1]||!1,!0,!0)||f):f=d=k(e[c].date||!1,!0,!0),f&&g.push({date:f!==d?[f,d]:f,text:e[c].text||"Tooltip",color:e[c].color||"inherit",element:e[c].element||((j=b.createElement("DIV")).className="calendar-tooltip",j.innerHTML='<div class="tooltip-inner">'+e[c].text,j)}));this.con.tooltips=g}return this},bind:function(){var a=this;return void 0===this._bind&&(this.e.addEventListener("focusin",function(b){a.open.call(a)}),this.e.addEventListener("keyup",function(b){a.callback.call(a,b)}),b.addEventListener("keyup",function(b){9==(b.keyCode||b.which)?a.close.call(a):a.dt.contains(b.target)&&a.callback.call(a,b)}),b.addEventListener("click",function(b){a.dt.contains(b.target)?a.callback.call(a,b):!a.e.contains(b.target)&&d(a.dt,"calendar-open")&&(b.target==a.dt||b.target==a.e||a.con.stayOpen||a.close.call(a))}),b.addEventListener("mouseover",function(b){a.dt.contains(b.target)&&a.callback.call(a,b)}),this._bind=!0),this},callback:function(b){var e,d=b.target,a="getAttribute",g="data-action",c=d[a](g)?d:d.parentElement[a](g)?d.parentElement:d,f="data-tooltip";if("mouseover"==b.type&&(!1!==(e=d[a](f)?d:!!c[a](f)&&c)?this.dt.querySelector("#tooltip-"+e[a](f)+"-"+e[a](f+"-time"))||this.showTooltip(e[a](f),e,e[a](f+"-time")):this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8))),"click"==b.type){if(!c||1!=b.buttons&&1!=(b.which||b.button)||c.hasAttribute("data-disabled"))return;switch(c[a](g)){case"prev":case"next":return this.browseView(c[a](g));case"cancel":this.con.stayOpen||this.close();break;case"submit":return this.con.stayOpen||this.close(),this.selectDate(this.fetchDate(parseInt(c[a]("data-date"))));case"view":return this.switchDate(c[a]("data-year")||null,c[a]("data-month")||null,c[a]("data-day")||null),this.switchView(c[a]("data-view"))}}if("keyup"==b.type){if("INPUT"!=b.target.tagName&&b.target!==this.e&&/calendar-(static|close)/i.test(this.dt.className))return!1;13!=(b.keyCode||b.which)||(this.selectDate(this.fetchDate(this.select)),b.stopPropagation(),this.con.stayOpen||this.close()),27!=(b.keyCode||b.which)||this.con.stayOpen||this.close()}},trigger:function(a){var c={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==a&&(g(this.e,"input",c),g(this.e,"change",c)),g(this.dt,"tail::"+a,c);for(var d=(this.events[a]||[]).length,b=0;b<d;b++)this.events[a][b].cb.apply(this,function(b,c,d){for(var e=c.length,a=0;a<e;++a)b[a-1]=c[a];return b[a]=d,b}(new Array(arguments.length),arguments,this.events[a][b].args));return!0},calcPosition:function(){var f=this.dt.style,g=c.getComputedStyle(this.dt),h=parseInt(g.marginLeft)+parseInt(g.marginRight),i=parseInt(g.marginTop)+parseInt(g.marginBottom),a={top:this.e.getBoundingClientRect().top,left:this.e.getBoundingClientRect().left,width:this.e.offsetWidth||0,height:this.e.offsetHeight||0},b=this.dt.parentElement;if(b){var j=b.getBoundingClientRect();a.top+=-j.top+b.scrollTop+b.offsetTop,a.left+=-j.left-b.scrollLeft+b.offsetLeft}switch(f.visibility="hidden",this.con.position){case"top":var d=a.top-(this.dt.offsetHeight+i),e=a.left+a.width/2-(this.dt.offsetWidth/2+h/2);break;case"left":var d=a.top+a.height/2-(this.dt.offsetHeight/2+i),e=a.left-(this.dt.offsetWidth+h);break;case"right":var d=a.top+a.height/2-(this.dt.offsetHeight/2+i),e=a.left+a.width;break;default:var d=a.top+a.height,e=a.left+a.width/2-(this.dt.offsetWidth/2+h/2)}return f.top=(d>=0?d:this.e.offsetTop)+"px",f.left=(e>=0?e:0)+"px",f.visibility="visible",this},convertDate:function(a,c){var b,d={H:String("00"+a.getHours()).toString().slice(-2),G:(b=a.getHours())%12?b%12:12,A:a.getHours()>=12?"PM":"AM",a:a.getHours()>=12?"pm":"am",i:String("00"+a.getMinutes()).toString().slice(-2),s:String("00"+a.getSeconds()).toString().slice(-2),Y:a.getFullYear(),y:parseInt(a.getFullYear().toString().slice(2)),m:String("00"+(a.getMonth()+1)).toString().slice(-2),M:this.__.months[a.getMonth()].slice(0,3),F:this.__.months[a.getMonth()],d:String("00"+a.getDate()).toString().slice(-2),D:this.__.days[a.getDay()],l:this.__.shorts[a.getDay()].toLowerCase()};return c.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,function(a){return 4==a.length||2==a.length?d[a.slice(-1)].toString().slice(-Math.abs(a.length)):1==a.length&&"0"==a[0]?d[a.slice(-1)].toString().slice(-1):d[a.slice(-1)].toString()}).replace(/(A|a|M|F|D|l)/g,function(a){return d[a]})},renderCalendar:function(){var c=["tail-datetime-calendar","calendar-close"],d=!0===this.con.classNames?this.e.className.split(" "):this.con.classNames;if(0>["top","left","right","bottom"].indexOf(this.con.position)){var f=b.querySelector(this.con.position);c.push("calendar-static")}(!0===this.con.rtl||["ar","he","mdr","sam","syr"].indexOf(this.con.rtl)>=0)&&c.push("rtl"),this.con.stayOpen&&c.push("calendar-stay"),(d="function"==typeof d.split?d.split(" "):d)instanceof Array&&(c=c.concat(d));var a=i("DIV",c),e=!1;if(a.id="tail-datetime-"+this.id,this.con.dateFormat?e='<span class="action action-prev" data-action="prev"></span><span class="label" data-action="view" data-view="up"></span><span class="action action-next" data-action="next"></span>':this.con.timeFormat&&(e='<span class="label"></span>'),a.innerHTML=e?'<div class="calendar-actions">'+e+"</div>":"",this.con.dateFormat&&this.renderDatePicker(a,this.con.viewDefault),this.con.timeFormat&&this.renderTimePicker(a),this.con.closeButton&&!f){var g=i("BUTTON","calendar-close"),h=this;g.addEventListener("click",function(a){a.preventDefault(),h.close()}),a.appendChild(g)}return(f||b.body).appendChild(a),a},renderDatePicker:function(c,a){if((!a||0>["decades","years","months","days"].indexOf(a))&&(a=this.con.viewDays?"days":this.con.viewMonths?"months":this.con.viewYears?"years":!!this.con.viewDecades&&"decades"),!a||!this.con["view"+j(a)]||!this.con.dateFormat)return!1;var d=b.createElement("DIV");return d.className="calendar-datepicker calendar-view-"+a,d.innerHTML=this["view"+j(a)](),c.querySelector(".calendar-datepicker")?c.replaceChild(d,c.querySelector(".calendar-datepicker")):c.appendChild(d),this.view.type=a,this.handleLabel(c)},renderTimePicker:function(j){if(!this.con.timeFormat)return!1;var k,c,g=[],a=0;if(this.con.time12h){var m=this.view.date.getHours()>12?'checked="checked" ':"";g.push('<label class="timepicker-switch" data-am="AM" data-pm="PM"><input type="checkbox" value="1" data-input="PM" '+m+"/><span></span></label>")}for(var e in{Hours:0,Minutes:0,Seconds:0}){if(!1===this.con["time"+e]){g.push((a++,null));continue}(c=b.createElement("INPUT")).type="text",c.disabled=null===this.con["time"+e],c.setAttribute("min","Hours"===e&&this.con.time12h?"01":"00"),c.setAttribute("max","Hours"!==e?"60":this.con.time12h?"13":"24"),c.setAttribute("step",this.con["timeStep"+e]),c.setAttribute("value",(k=this.view.date["get"+e]())<10?"0"+k:k),c.setAttribute("pattern","d*"),c.setAttribute("inputmode","numeric"),c.setAttribute("data-input",e.toLowerCase()),g.push('<div class="timepicker-field timepicker-'+e.toLowerCase()+'">'+c.outerHTML+'<button class="picker-step step-up"></button><button class="picker-step step-down"></button><label>'+this.__.time[a++]+"</label></div>")}var h=i("DIV","calendar-timepicker"),n=this;h.innerHTML=g.join("\n");for(var f=h.querySelectorAll("input"),a=0;a<f.length;a++){if("checkbox"===f[a].type){f[a].addEventListener("change",function(a){n.handleTime.call(n,this)});continue}f[a].addEventListener("input",function(a){n.handleTime.call(n,this)}),f[a].addEventListener("keydown",function(b){var a=event.keyCode||event.which||0;if(38===a||40===a)return b.preventDefault(),n.handleStep.call(n,this,38===a?"up":"down"),!1})}for(var f=h.querySelectorAll("button"),a=0;a<f.length;a++)f[a].addEventListener("mousedown",function(a){a.preventDefault();var b=this.parentElement.querySelector("input");return n.handleStep.call(n,b,d(this,"step-up")?"up":"down"),!1});var l=j.querySelector(".calendar-timepicker");return j[l?"replaceChild":"appendChild"](h,l),this.handleLabel(j)},handleTime:function(b){this.con.time12h&&"checkbox"===b.type&&(this.ampm=b.checked);var a=b.parentElement.parentElement;a=[a.querySelector("input[data-input=hours]")||{value:0},a.querySelector("input[data-input=minutes]")||{value:0},a.querySelector("input[data-input=seconds]")||{value:0}],this.selectTime(parseInt(a[0].value)+(this.ampm?12:0),parseInt(a[1].value),parseInt(a[2].value)),a[2].value=this.view.date.getSeconds(),a[1].value=this.view.date.getMinutes(),this.con.time12h?a[0].value=this.view.date.getHours()>12?this.view.date.getHours()-12:this.view.date.getHours():a[0].value=this.view.date.getHours()},handleStep:function(a,i,j){var d=null,c=parseInt(a.value),k=parseInt(a.getAttribute("min")),e=parseInt(a.getAttribute("max")),l=a.getAttribute("data-input"),b=parseInt(a.getAttribute("step"));if("up"===i?(d=c+b>=e||null,a.value=c+b>=e?13===e?1:0:c+b,this.ampm=!!this.con.time12h&&this.view.date.getHours()+1>=12):"down"===i&&(d=!(c-b<k)&&null,a.value=c-b<k?e-b:c-b,this.ampm=!!this.con.time12h&&this.view.date.getHours()-1<=0),a.value<10&&(a.value="0"+a.value),this.con.timeIncrement&&null!==d){var f=a.parentElement.previousElementSibling;f&& !1===f.disabled?this.handleStep(f.querySelector("input"),d?"up":"down",!0):"hours"==l&&this.view.date.setDate(this.view.date.getDate()+(d?1:-1))}if(void 0!==j&& !0===j)return!1;var g=a.parentElement.parentElement;if(this.selectTime(parseInt((g.querySelector("input[data-input=hours]")||{value:0}).value)+(this.ampm?12:0),parseInt((g.querySelector("input[data-input=minutes]")||{value:0}).value),parseInt((g.querySelector("input[data-input=seconds]")||{value:0}).value)),this.con.time12h){var h=a.parentElement.parentElement.querySelector("input[type=checkbox]");h&&h.checked!==this.view.date.getHours()>12&&(h.checked=this.view.date.getHours()>12)}return!0},handleLabel:function(c){var a,b,d=c.querySelector(".label");switch(this.view.type){case"days":a=this.__.months[this.view.date.getMonth()]+", "+this.view.date.getFullYear();break;case"months":a=this.view.date.getFullYear();break;case"years":a=(b=parseInt(this.view.date.getFullYear().toString().slice(0,3)+"0"))+" - "+(b+10);break;case"decades":a=(b=parseInt(this.view.date.getFullYear().toString().slice(0,2)+"00"))+" - "+(b+100);break;case"time":a=this.__.header[3]}return d.innerText=a,c},viewDecades:function(){var d=this.view.date.getFullYear(),a=new Date(this.view.date.getTime()),e=this.con.today?new Date().getYear():0;a.setFullYear(d-parseInt(d.toString()[3])-30);for(var f,g,c=[],h=[],b=1;b<=16;b++)f="calendar-decade"+(e>=a.getYear()&&e<=a.getYear()+10?" date-today":""),g='data-action="view" data-view="down" data-year="'+a.getFullYear()+'"',c.push('<td class="'+f+'" '+g+'><span class="inner">'+a.getFullYear()+" - "+(a.getFullYear()+10)+"</span></td>"),b>=4&&b%4==0&&(h.push("<tr>\n"+c.join("\n")+"\n</tr>"),c=[]),a.setFullYear(a.getFullYear()+10);return'<table class="calendar-decades"><thead><tr><th colspan="4">'+this.__.header[2]+"</th></tr></thead><tbody>"+h.join("\n")+"</tbody></table>"},viewYears:function(){var d=this.view.date.getFullYear(),a=new Date(this.view.date.getTime()),h=this.con.today?new Date().getYear():0;a.setFullYear(d-parseInt(d.toString()[3])-2);for(var e,f,c=[],g=[],b=1;b<=16;b++)e="calendar-year"+(a.getYear()==h?" date-today":""),f='data-action="view" data-view="down" data-year="'+a.getFullYear()+'"',c.push('<td class="'+e+'" '+f+'><span class="inner">'+a.getFullYear()+"</span></td>"),b>=4&&b%4==0&&(g.push("<tr>\n"+c.join("\n")+"\n</tr>"),c=[]),a.setFullYear(a.getFullYear()+1);return'<table class="calendar-years"><thead><tr><th colspan="4">'+this.__.header[1]+"</th></tr></thead><tbody>"+g.join("\n")+"</tbody></table>"},viewMonths:function(){var g=this.__.months,c=this.con.today?new Date().getMonth():-1;c=this.view.date.getYear()==new Date().getYear()?c:-1;for(var d,e,b=[],f=[],a=0;a<12;a++)d="calendar-month"+(c==a?" date-today":""),e='data-action="view" data-view="down" data-month="'+a+'"',b.push('<td class="'+d+'" '+e+'><span class="inner">'+g[a]+"</span></td>"),3==b.length&&(f.push("<tr>\n"+b.join("\n")+"\n</tr>"),b=[]);return'<table class="calendar-months"><thead><tr><th colspan="3">'+this.__.header[0]+"</th></tr></thead><tbody>"+f.join("\n")+"</tbody></table>"},viewDays:function(){var b,d,g,h,k,l,i,a=new Date(this.view.date.getTime()),n=new Date().toDateString(),m=a.getMonth(),j=[],f=[],c=[0,[]],e=([].concat(this.con.tooltips),[0,0]);for(a.setHours(0,0,0,0),a.setDate(1),i=a.getDay(),i+=i<this.con.weekStart?7:0,a.setDate(this.con.weekStart-i+1);f.length<6;)b=a.getTime(),l=[].concat(this.con.dateRanges),g='data-action="submit" data-date="'+a.getTime()+'"',d="calendar-day date-"+(a.getMonth()>m?"next":a.getMonth()<m?"previous":"current"),this.con.today&&n==a.toDateString()&&(d+=" date-today"),this.con.dateBlacklist&&(b<this.con.dateStart||b>this.con.dateEnd)?c=[b<this.con.dateStart?this.con.dateStart:1/0,[0,1,2,3,4,5,6],!0]:this.con.dateRanges.length>0?l.filter(function(a){return a.start==1/0||b>=a.start&&b<=a.end?(c=[a.end,a.days],!1):a.start>b},this):3==c.length&&(c=[0,[0,1,2,3,4,5,6]]),this.con.tooltips.length>0&&this.con.tooltips.filter(function(a,c){a.date instanceof Array?a.date[0]<=b&&a.date[1]>=b&&(e=[a.date[1],c,a.color]):a.date==b&&(e=[a.date,c,a.color])},this),e[0]<b&&(e=[0,0]),k=c[0]>=b&&c[1].indexOf(a.getDay())>=0,k&&this.con.dateBlacklist|| !k&&!this.con.dateBlacklist?(d+=" date-disabled",g+=' data-disabled="true"'):0!==c[0]&&c[0]<=b&&(c=[0,[]]),this.select&&this.select.toDateString()==a.toDateString()&&(d+=" date-select"),h='<span class="inner">'+a.getDate()+"</span>",e[0]>0&&(d+=" date-tooltip",g+=' data-tooltip="'+e[1]+'" data-tooltip-time="'+b+'"',"inherit"!==e[2]?h+='<span class="tooltip-tick" style="background:'+e[2]+';"></span>':h+='<span class="tooltip-tick"></span>'),j.push('<td class="'+d+'" '+g+">"+h+"</td>"),7==j.length&&(f.push("<tr>\n"+j.join("\n")+"\n</tr>"),j=[]),a.setDate(a.getDate()+1);return f="<tbody>"+f.join("\n")+"</tbody>",'<table class="calendar-days">'+this.weekdays+f+"</table>"},showTooltip:function(d,c,f){var e,b=this.con.tooltips[d].element,a=b.style,g=this.dt.querySelector(".calendar-datepicker");a.cssText="opacity:0;visibility:hidden;",b.id="tooltip-"+d+"-"+f,g.appendChild(b),e=b.offsetWidth,b.offsetHeight,a.top=c.offsetTop+c.offsetHeight+"px",a.left=c.offsetLeft+c.offsetWidth/2-e/2+"px",a.visibility="visible",this.con.animate?(b.setAttribute("data-top",parseInt(a.top)),a.top=parseInt(a.top)+5+"px",parseFloat(a.top)>b.getAttribute("data-top")&&(a.top=parseFloat(a.top)-.5+"px"),(a.opacity=parseFloat(a.opacity)+.125)<1&&setTimeout(fade,20)):a.opacity=1},hideTooltip:function(b){var a=this.dt.querySelector("#tooltip-"+b),c=a.style;this.con.animate?(a.className+=" remove",function b(){if(parseFloat(c.top)<parseInt(a.getAttribute("data-top"))+5&&(c.top=parseFloat(c.top)+.5+"px"),(c.opacity-=.125)<0)return a.className="calendar-tooltip",a.parentElement.removeChild(a);setTimeout(b,20)}()):a.parentElement.removeChild(a)},switchView:function(a){var b=[null,"days","months","years","decades",null];return -1!=b.indexOf(a)||("up"==a?a=b[(b.indexOf(this.view.type)||5)+1]||null:"down"==a&&(a=b[(b.indexOf(this.view.type)||1)-1]||null),a&&this.con["view"+j(a)]||(a=!1)),!!a&&(this.renderDatePicker(this.dt,a),this.trigger("view",a))},switchDate:function(b,c,a,d){return"auto"===a&&(a=this.view.date.getDate(),(1===this.view.date.getMonth()&&a>=28||a>=30)&&(a=(a=new Date(b,c+1,0)).getDate())),this.view.date.setFullYear(void 0==b?this.view.date.getFullYear():b,void 0==c?this.view.date.getMonth():c,a||this.view.date.getDate()),!0===d||this.switchView(this.view.type)},switchMonth:function(a,b){return"string"==typeof a&&(a=["previous","prev"].indexOf(a)>=0?-1:1,a=this.view.date.getMonth()+type),this.switchDate(b||this.getFullYear(),a)},switchYear:function(a){return"string"==typeof a&&(a=["previous","prev"].indexOf(a)>=0?-1:1,a=this.view.date.getFullYear()+type),this.switchDate(a)},browseView:function(a){switch(a=["previous","prev"].indexOf(a)>=0?-1:1,this.view.type){case"days":return this.switchDate(null,this.view.date.getMonth()+a,"auto");case"months":return this.switchDate(this.view.date.getFullYear()+a,null,"auto");case"years":return this.switchDate(this.view.date.getFullYear()+10*a,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*a,null,"auto")}return!1},fetchDate:function(b){b=k(b||!1)||this.view.date;var a=this.dt.querySelectorAll("input[type=text]");return a&&3==a.length&&b.setHours(a[0].value||0,a[1].value||0,a[2].value||0,0),b},selectDate:function(a,d,e,f,g,h){var b=new Date,c=[];return this.con.dateFormat&&c.push(this.con.dateFormat),this.con.timeFormat&&c.push(this.con.timeFormat),this.select=a instanceof Date?a:new Date(a||(void 0==a?this.view.date.getFullYear():b.getFullYear()),d||(void 0==d?this.view.date.getMonth():b.getMonth()),e||(void 0==e?this.view.date.getDate():b.getDate()),f||(void 0==f?this.view.date.getHours():0),g||(void 0==g?this.view.date.getMinutes():0),h||(void 0==h?this.view.date.getSeconds():0)),this.view.date=new Date(this.select.getTime()),this.e.value=this.convertDate(this.select,c.join(" ")),this.e.setAttribute("data-value",this.select.getTime()),this.switchView("days"),this.dt.contains(document.activeElement)||this.renderTimePicker(this.dt),this.trigger("change")},selectTime:function(a,b,c){return this.selectDate(void 0,void 0,void 0,a,b,c)},open:function(){if(!d(this.dt,"calendar-close"))return this;var b=this,a=this.dt.style;return a.display="block",a.opacity=this.con.animate?0:1,f(this.dt,"calendar-close"),e(this.dt,"calendar-idle"),d(this.dt,"calendar-static")||b.calcPosition(),function c(){if((a.opacity=parseFloat(a.opacity)+.125)>=1)return f(b.dt,"calendar-idle"),e(b.dt,"calendar-open"),b.trigger("open");setTimeout(c,20)}(),this},close:function(){if(!d(this.dt,"calendar-open"))return this;var b=this,a=this.dt.style;return a.display="block",a.opacity=this.con.animate?1:0,f(this.dt,"calendar-open"),e(this.dt,"calendar-idle"),function c(){if((a.opacity-=.125)<=0)return f(b.dt,"calendar-idle"),e(b.dt,"calendar-close"),a.display="none",b.trigger("close");setTimeout(c,20)}(),this},toggle:function(){return d(this.dt,"calendar-open")?this.close():d(this.dt,"calendar-close")?this.open():this},on:function(a,b,c){return!(0>["open","close","change","view"].indexOf(a))&&"function"==typeof b&&(a in this.events||(this.events[a]=[]),this.events[a].push({cb:b,args:c instanceof Array?c:[]}),this)},remove:function(){return this.e.removeAttribute("data-tail-datetime"),this.e.removeAttribute("data-value"),this.dt.parentElement.removeChild(this.dt),this},reload:function(){return this.remove(),this.init()},config:function(a,b,d){if(a instanceof Object){for(var c in a)this.config(c,a[c],!1);return this.reload(),this.con}return void 0===a?this.con:a in this.con&&(void 0===b?this.con[a]:(this.con[a]=b,!1!==this.rebuild&&this.reload(),this))}},a})