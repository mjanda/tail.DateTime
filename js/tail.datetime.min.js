!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"object"==typeof module&&module.exports?module.exports=e(t,t.document):(void 0===t.tail&&(t.tail={}),t.tail.DateTime=t.tail.datetime=e(t,t.document),"undefined"!=typeof jQuery&&(jQuery.fn.DateTime=jQuery.fn.datetime=function(t){var e,i=[];return this.each(function(){!1!==(e=tail.DateTime(this,t))&&i.push(e)}),1===i.length?i[0]:0!==i.length&&i}),"undefined"!=typeof MooTools&&(Element.implement({DateTime:function(t){return new tail.DateTime(this,t)}}),Element.implement({datetime:function(t){return new tail.DateTime(this,t)}})))}(window,function(t,e){"use strict";function i(t,e){return!!(t&&"classList"in t)&&t.classList.contains(e)}function a(t,e){return t&&"classList"in t?t.classList.add(e):void 0}function n(t,e){return t&&"classList"in t?t.classList.remove(e):void 0}function s(t,i,a){if(CustomEvent&&CustomEvent.name)var n=new CustomEvent(i,a);else(n=e.createEvent("CustomEvent")).initCustomEvent(i,!!a.bubbles,!!a.cancelable,a.detail);return t.dispatchEvent(n)}function r(t,e){if("function"==typeof Object.assign)return Object.assign({},t,e||{});var i=Object.constructor();for(var a in t)i[a]=a in e?e[a]:t[a];return i}function o(t,i){var a=e.createElement(t);return a.className=i&&i.join?i.join(" "):i||"",a}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t,e,i){var a=t instanceof Date?t:!!t&&new Date(t);return a instanceof Date&&!isNaN(a.getDate())&&(i&&a.setHours(0,0,0,0),!0===e?a.getTime():a)}e.forms.inputmode=!0;var h=function(t,i){if((t="string"==typeof t?e.querySelectorAll(t):t)instanceof NodeList||t instanceof HTMLCollection||t instanceof Array){for(var a=[],n=t.length,s=0;s<n;s++)a.push(new h(t[s],i));return 1===a.length?a[0]:0!==a.length&&a}if(!(t instanceof Element))return!1;if(!(this instanceof h))return new h(t,i);if(h.inst[t.getAttribute("data-tail-datetime")])return h.inst[t.getAttribute("data-tail-datetime")];if(t.getAttribute("data-datetime")){var o=JSON.parse(t.getAttribute("data-datetime").replace(/\'/g,'"'));o instanceof Object&&(i=r(i,o))}return this.e=t,this.id=++h.count,this.con=r(h.defaults,i),h.inst["tail-"+this.id]=this,this.e.setAttribute("data-tail-datetime","tail-"+this.id),this.init()};return h.version="0.4.14",h.status="beta",h.count=0,h.inst={},h.defaults={animate:!0,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,time12h:!1,timeFormat:"HH:ii:ss",timeHours:!0,timeMinutes:!0,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0},h.strings={en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shorts:["SUN","MON","TUE","WED","THU","FRI","SAT"],time:["Hours","Minutes","Seconds"],header:["Select a Month","Select a Year","Select a Decade","Select a Time"]},modify:function(t,e,i){if(!(t in this))return!1;if(e instanceof Object)for(var a in e)this.modify(t,a,e[a]);else this[t][e]="string"==typeof i?i:this[t][e];return!0},register:function(t,e){return"string"==typeof t&&e instanceof Object&&(this[t]=e,!0)}},h.prototype={init:function(){this.prepare();var t=this.__.shorts.slice(this.con.weekStart).concat(this.__.shorts.slice(0,this.con.weekStart));this.weekdays="<thead>\n<tr>\n";for(var e=0;e<7;e++)this.weekdays+='<th class="calendar-week">'+t[e]+"</th>";this.weekdays+="\n</tr>\n</thead>",this.select=c(this.e.getAttribute("data-value")||this.e.value),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),null==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date});var i=["Hours","Minutes","Seconds"];for(e=0;e<3;e++)if("number"==typeof this.con["time"+i[e]])this.view.date["set"+i[e]](this.con["time"+i[e]]);else for(;this.view.date["get"+i[e]]()%this.con["timeStep"+i[e]]!=0;)this.view.date["set"+i[e]](this.view.date["get"+i[e]]()+1);return this.ampm=!!this.con.time12h&&this.view.date.getHours()>12,this.events={},this.dt=this.renderCalendar(),this.con.startOpen&&this.open(),this.select&&this.selectDate(this.select),this.bind()},prepare:function(){if(this.__=r(h.strings.en,h.strings[this.con.locale]||{}),this.con.dateStart=c(this.con.dateStart,!0,!0)||-9999999999999,this.con.dateEnd=c(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.dateFormat?this.con.viewDefault:"time","string"==typeof this.con.weekStart&&(this.con.weekStart=h.strings.en.shorts.indexOf(this.con.weekStart)),this.con.weekStart<0&&this.con.weekStart>6&&(this.con.weekStart=0),this.con.dateRanges.length>0){for(var t=[],i=(s=this.con.dateRanges).length,a=0;a<i;a++)s[a]instanceof Object&&(s[a].start||s[a].days)&&(!1===(s[a].start=c(s[a].start||!1,!0,!0))?s[a].start=s[a].end=1/0:(!1===(s[a].end=c(s[a].end||!1,!0,!0))&&(s[a].end=s[a].start),s[a].start=s[a].start>s[a].end?[s[a].end,s[a].end=s[a].start][0]:s[a].start),s[a].days=!("days"in s[a])||s[a].days,s[a].days="boolean"!=typeof s[a].days?function(t){for(var e=[],i=t.length,a=0;a<i;a++)"string"==typeof t[a]&&(t[a]=h.strings.en.shorts.indexOf(t[a])),t[a]>=0&&t[a]<=6&&e.push(t[a]);return e}(s[a].days instanceof Array?s[a].days:[s[a].days]):[0,1,2,3,4,5,6],t.push({start:s[a].start,end:s[a].end,days:s[a].days}));this.con.dateRanges=t}if(this.con.tooltips.length>0){t=[];var n,s,o=this.con.tooltips;for(i=o.length,a=0;a<i;a++)o[a]instanceof Object&&o[a].date&&(o[a].date instanceof Array?(n=c(o[a].date[0]||!1,!0,!0),s=c(o[a].date[1]||!1,!0,!0)||n):n=s=c(o[a].date||!1,!0,!0),n&&t.push({date:n!==s?[n,s]:n,text:o[a].text||"Tooltip",color:o[a].color||"inherit",element:o[a].element||(l=e.createElement("DIV"),l.className="calendar-tooltip",l.innerHTML='<div class="tooltip-inner">'+o[a].text||"Tooltip</div>",l)}));this.con.tooltips=t}var l;return this},bind:function(){var t=this;return void 0===this._bind&&(this.e.addEventListener("focusin",function(e){t.open.call(t)}),this.e.addEventListener("keyup",function(e){t.callback.call(t,e)}),e.addEventListener("keyup",function(e){t.dt.contains(e.target)&&t.callback.call(t,e)}),e.addEventListener("click",function(e){t.dt.contains(e.target)?t.callback.call(t,e):!t.e.contains(e.target)&&i(t.dt,"calendar-open")&&(e.target==t.dt||e.target==t.e||t.con.stayOpen||t.close.call(t))}),e.addEventListener("mouseover",function(e){t.dt.contains(e.target)&&t.callback.call(t,e)}),this._bind=!0),this},callback:function(t){var e,i=t.target,a="getAttribute",n="data-action",s=i[a](n)?i:i.parentElement[a](n)?i.parentElement:i,r="data-tooltip";if("mouseover"==t.type&&(!1!==(e=i[a](r)?i:!!s[a](r)&&s)?this.dt.querySelector("#tooltip-"+e[a](r)+"-"+e[a](r+"-time"))||this.showTooltip(e[a](r),e,e[a](r+"-time")):this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8))),"click"==t.type){if(!s||1!=t.buttons&&1!=(t.which||t.button))return;if(s.hasAttribute("data-disabled"))return;switch(s[a](n)){case"prev":case"next":return this.browseView(s[a](n));case"cancel":this.con.stayOpen||this.close();break;case"submit":return this.con.stayOpen||this.close(),this.selectDate(this.fetchDate(parseInt(s[a]("data-date"))));case"view":return this.switchDate(s[a]("data-year")||null,s[a]("data-month")||null,s[a]("data-day")||null),this.switchView(s[a]("data-view"))}}if("keyup"==t.type){if("INPUT"!=t.target.tagName&&t.target!==this.e&&/calendar-(static|close)/i.test(this.dt.className))return!1;13==(t.keyCode||t.which)&&(this.selectDate(this.fetchDate(this.select)),t.stopPropagation(),this.con.stayOpen||this.close()),27==(t.keyCode||t.which)&&(this.con.stayOpen||this.close())}},trigger:function(t){var e={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==t&&(s(this.e,"input",e),s(this.e,"change",e)),s(this.dt,"tail::"+t,e);for(var i=(this.events[t]||[]).length,a=0;a<i;a++)this.events[t][a].cb.apply(this,function(t,e,i){for(var a=e.length,n=0;n<a;++n)t[n-1]=e[n];return t[n]=i,t}(new Array(arguments.length),arguments,this.events[t][a].args));return!0},calcPosition:function(){var e=this.dt.style,i=t.getComputedStyle(this.dt),a=parseInt(i.marginLeft)+parseInt(i.marginRight),n=parseInt(i.marginTop)+parseInt(i.marginBottom),s={top:this.e.getBoundingClientRect().top,left:this.e.getBoundingClientRect().left,width:this.e.offsetWidth||0,height:this.e.offsetHeight||0};"fixed"!==i.getPropertyValue("position")&&(s.top+=t.scrollY,s.left+=-t.scrollX);var r=this.dt.parentElement;if(r){var o=r.getBoundingClientRect();s.top+=-o.top+dpParent.scrollTop,s.left+=-o.left-dpParent.scrollLeft}switch(e.visibility="hidden",this.con.position){case"top":var l=s.top-(this.dt.offsetHeight+n),c=s.left+s.width/2-(this.dt.offsetWidth/2+a/2);break;case"left":l=s.top+s.height/2-(this.dt.offsetHeight/2+n),c=s.left-(this.dt.offsetWidth+a);break;case"right":l=s.top+s.height/2-(this.dt.offsetHeight/2+n),c=s.left+s.width;break;default:l=s.top+s.height,c=s.left+s.width/2-(this.dt.offsetWidth/2+a/2)}return e.top=(l>=0?l:this.e.offsetTop)+"px",e.left=(c>=0?c:0)+"px",e.visibility="visible",this},convertDate:function(t,e){var i,a={H:String("00"+t.getHours()).toString().slice(-2),G:(i=t.getHours(),i%12?i%12:12),A:t.getHours()>=12?"PM":"AM",a:t.getHours()>=12?"pm":"am",i:String("00"+t.getMinutes()).toString().slice(-2),s:String("00"+t.getSeconds()).toString().slice(-2),Y:t.getFullYear(),y:parseInt(t.getFullYear().toString().slice(2)),m:String("00"+(t.getMonth()+1)).toString().slice(-2),M:this.__.months[t.getMonth()].slice(0,3),F:this.__.months[t.getMonth()],d:String("00"+t.getDate()).toString().slice(-2),D:this.__.days[t.getDay()],l:this.__.shorts[t.getDay()].toLowerCase()};return e.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,function(t){return 4==t.length||2==t.length?a[t.slice(-1)].toString().slice(-Math.abs(t.length)):1==t.length&&"0"==t[0]?a[t.slice(-1)].toString().slice(-1):a[t.slice(-1)].toString()}).replace(/(A|a|M|F|D|l)/g,function(t){return a[t]})},renderCalendar:function(){var t=["tail-datetime-calendar","calendar-close"],i=!0===this.con.classNames?this.e.className.split(" "):this.con.classNames;if(["top","left","right","bottom"].indexOf(this.con.position)<0){var a=e.querySelector(this.con.position);t.push("calendar-static")}(!0===this.con.rtl||["ar","he","mdr","sam","syr"].indexOf(this.con.rtl)>=0)&&t.push("rtl"),this.con.stayOpen&&t.push("calendar-stay"),(i="function"==typeof i.split?i.split(" "):i)instanceof Array&&(t=t.concat(i));var n=o("DIV",t),s=!1;if(n.id="tail-datetime-"+this.id,this.con.dateFormat?s='<span class="action action-prev" data-action="prev"></span><span class="label" data-action="view" data-view="up"></span><span class="action action-next" data-action="next"></span>':this.con.timeFormat&&(s='<span class="label"></span>'),n.innerHTML=s?'<div class="calendar-actions">'+s+"</div>":"",this.con.dateFormat&&this.renderDatePicker(n,this.con.viewDefault),this.con.timeFormat&&this.renderTimePicker(n),this.con.closeButton&&!a){var r=o("BUTTON","calendar-close"),l=this;r.addEventListener("click",function(t){t.preventDefault(),l.close()}),n.appendChild(r)}return(a||e.body).appendChild(n),n},renderDatePicker:function(t,i){if((!i||["decades","years","months","days"].indexOf(i)<0)&&(i=this.con.viewDays?"days":this.con.viewMonths?"months":this.con.viewYears?"years":!!this.con.viewDecades&&"decades"),!i||!this.con["view"+l(i)]||!this.con.dateFormat)return!1;var a=e.createElement("DIV");return a.className="calendar-datepicker calendar-view-"+i,a.innerHTML=this["view"+l(i)](),t.querySelector(".calendar-datepicker")?t.replaceChild(a,t.querySelector(".calendar-datepicker")):t.appendChild(a),this.view.type=i,this.handleLabel(t)},renderTimePicker:function(t){if(!this.con.timeFormat)return!1;var a,n,s=[],r=0;if(this.con.time12h){var l=this.view.date.getHours()>12?'checked="checked" ':"";s.push('<label class="timepicker-switch" data-am="AM" data-pm="PM"><input type="checkbox" value="1" data-input="PM" '+l+"/><span></span></label>")}for(var c in{Hours:0,Minutes:0,Seconds:0})!1!==this.con["time"+c]?((a=e.createElement("INPUT")).type="text",a.disabled=null===this.con["time"+c],a.setAttribute("min","Hours"===c&&this.con.time12h?"01":"00"),a.setAttribute("max","Hours"!==c?"60":this.con.time12h?"13":"24"),a.setAttribute("step",this.con["timeStep"+c]),a.setAttribute("value",(n=this.view.date["get"+c]())<10?"0"+n:n),a.setAttribute("pattern","d*"),a.setAttribute("inputmode","numeric"),a.setAttribute("data-input",c.toLowerCase()),s.push('<div class="timepicker-field timepicker-'+c.toLowerCase()+'">'+a.outerHTML+'<button class="picker-step step-up"></button><button class="picker-step step-down"></button><label>'+this.__.time[r++]+"</label></div>")):s.push((r++,null));var h=o("DIV","calendar-timepicker"),d=this;h.innerHTML=s.join("\n");var u=h.querySelectorAll("input");for(r=0;r<u.length;r++)"checkbox"!==u[r].type?(u[r].addEventListener("input",function(t){d.handleTime.call(d,this)}),u[r].addEventListener("keydown",function(t){var e=event.keyCode||event.which||0;if(38===e||40===e)return t.preventDefault(),d.handleStep.call(d,this,38===e?"up":"down"),!1})):u[r].addEventListener("change",function(t){d.handleTime.call(d,this)});for(u=h.querySelectorAll("button"),r=0;r<u.length;r++)u[r].addEventListener("mousedown",function(t){t.preventDefault();var e=this.parentElement.querySelector("input");return d.handleStep.call(d,e,i(this,"step-up")?"up":"down"),!1});var p=t.querySelector(".calendar-timepicker");return t[p?"replaceChild":"appendChild"](h,p),this.handleLabel(t)},handleTime:function(t){this.con.time12h&&"checkbox"===t.type&&(this.ampm=t.checked);var e=t.parentElement.parentElement;e=[e.querySelector("input[data-input=hours]")||{value:0},e.querySelector("input[data-input=minutes]")||{value:0},e.querySelector("input[data-input=seconds]")||{value:0}],this.selectTime(parseInt(e[0].value)+(this.ampm?12:0),parseInt(e[1].value),parseInt(e[2].value)),e[2].value=this.view.date.getSeconds(),e[1].value=this.view.date.getMinutes(),this.con.time12h?e[0].value=this.view.date.getHours()>12?this.view.date.getHours()-12:this.view.date.getHours():e[0].value=this.view.date.getHours()},handleStep:function(t,e,i){var a=null,n=parseInt(t.value),s=parseInt(t.getAttribute("min")),r=parseInt(t.getAttribute("max")),o=t.getAttribute("data-input"),l=parseInt(t.getAttribute("step"));if("up"===e?(a=n+l>=r||null,t.value=n+l>=r?13===r?1:0:n+l,this.ampm=!!this.con.time12h&&this.view.date.getHours()+1>=12):"down"===e&&(a=!(n-l<s)&&null,t.value=n-l<s?r-l:n-l,this.ampm=!!this.con.time12h&&this.view.date.getHours()-1<=0),t.value<10&&(t.value="0"+t.value),this.con.timeIncrement&&null!==a){var c=t.parentElement.previousElementSibling;c&&!1===c.disabled?this.handleStep(c.querySelector("input"),a?"up":"down",!0):"hours"==o&&this.view.date.setDate(this.view.date.getDate()+(a?1:-1))}if(void 0!==i&&!0===i)return!1;var h=t.parentElement.parentElement;if(this.selectTime(parseInt((h.querySelector("input[data-input=hours]")||{value:0}).value)+(this.ampm?12:0),parseInt((h.querySelector("input[data-input=minutes]")||{value:0}).value),parseInt((h.querySelector("input[data-input=seconds]")||{value:0}).value)),this.con.time12h){var d=t.parentElement.parentElement.querySelector("input[type=checkbox]");d&&d.checked!==this.view.date.getHours()>12&&(d.checked=this.view.date.getHours()>12)}return!0},handleLabel:function(t){var e,i,a=t.querySelector(".label");switch(this.view.type){case"days":e=this.__.months[this.view.date.getMonth()]+", "+this.view.date.getFullYear();break;case"months":e=this.view.date.getFullYear();break;case"years":e=(i=parseInt(this.view.date.getFullYear().toString().slice(0,3)+"0"))+" - "+(i+10);break;case"decades":e=(i=parseInt(this.view.date.getFullYear().toString().slice(0,2)+"00"))+" - "+(i+100);break;case"time":e=this.__.header[3]}return a.innerText=e,t},viewDecades:function(){var t=this.view.date.getFullYear(),e=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0;e.setFullYear(t-parseInt(t.toString()[3])-30);for(var a,n,s=[],r=[],o=1;o<=16;o++)a="calendar-decade"+(i>=e.getYear()&&i<=e.getYear()+10?" date-today":""),n='data-action="view" data-view="down" data-year="'+e.getFullYear()+'"',s.push('<td class="'+a+'" '+n+'><span class="inner">'+e.getFullYear()+" - "+(e.getFullYear()+10)+"</span></td>"),o>=4&&o%4==0&&(r.push("<tr>\n"+s.join("\n")+"\n</tr>"),s=[]),e.setFullYear(e.getFullYear()+10);return'<table class="calendar-decades"><thead><tr><th colspan="4">'+this.__.header[2]+"</th></tr></thead><tbody>"+r.join("\n")+"</tbody></table>"},viewYears:function(){var t=this.view.date.getFullYear(),e=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0;e.setFullYear(t-parseInt(t.toString()[3])-2);for(var a,n,s=[],r=[],o=1;o<=16;o++)a="calendar-year"+(e.getYear()==i?" date-today":""),n='data-action="view" data-view="down" data-year="'+e.getFullYear()+'"',s.push('<td class="'+a+'" '+n+'><span class="inner">'+e.getFullYear()+"</span></td>"),o>=4&&o%4==0&&(r.push("<tr>\n"+s.join("\n")+"\n</tr>"),s=[]),e.setFullYear(e.getFullYear()+1);return'<table class="calendar-years"><thead><tr><th colspan="4">'+this.__.header[1]+"</th></tr></thead><tbody>"+r.join("\n")+"</tbody></table>"},viewMonths:function(){var t=this.__.months,e=this.con.today?(new Date).getMonth():-1;e=this.view.date.getYear()==(new Date).getYear()?e:-1;for(var i,a,n=[],s=[],r=0;r<12;r++)i="calendar-month"+(e==r?" date-today":""),a='data-action="view" data-view="down" data-month="'+r+'"',n.push('<td class="'+i+'" '+a+'><span class="inner">'+t[r]+"</span></td>"),3==n.length&&(s.push("<tr>\n"+n.join("\n")+"\n</tr>"),n=[]);return'<table class="calendar-months"><thead><tr><th colspan="3">'+this.__.header[0]+"</th></tr></thead><tbody>"+s.join("\n")+"</tbody></table>"},viewDays:function(){var t,e,i,a,n,s,r=new Date(this.view.date.getTime()),o=(new Date).toDateString(),l=r.getMonth(),c=[],h=[],d=[0,[]],u=([].concat(this.con.tooltips),[0,0]);for(r.setHours(0,0,0,0),r.setDate(1),r.setDate(1-(r.getDay()-this.con.weekStart));h.length<6;)t=r.getTime(),s=[].concat(this.con.dateRanges),i='data-action="submit" data-date="'+r.getTime()+'"',e="calendar-day date-"+(r.getMonth()>l?"next":r.getMonth()<l?"previous":"current"),this.con.today&&o==r.toDateString()&&(e+=" date-today"),this.con.dateBlacklist&&(t<this.con.dateStart||t>this.con.dateEnd)?d=[t<this.con.dateStart?this.con.dateStart:1/0,[0,1,2,3,4,5,6],!0]:this.con.dateRanges.length>0?s.filter(function(e){return e.start==1/0||t>=e.start&&t<=e.end?(d=[e.end,e.days],!1):e.start>t},this):3==d.length&&(d=[0,[0,1,2,3,4,5,6]]),this.con.tooltips.length>0&&this.con.tooltips.filter(function(e,i){e.date instanceof Array?e.date[0]<=t&&e.date[1]>=t&&(u=[e.date[1],i,e.color]):e.date==t&&(u=[e.date,i,e.color])},this),u[0]<t&&(u=[0,0]),(n=d[0]>=t&&d[1].indexOf(r.getDay())>=0)&&this.con.dateBlacklist||!n&&!this.con.dateBlacklist?(e+=" date-disabled",i+=' data-disabled="true"'):0!==d[0]&&d[0]<=t&&(d=[0,[]]),this.select&&this.select.toDateString()==r.toDateString()&&(e+=" date-select"),a='<span class="inner">'+r.getDate()+"</span>",u[0]>0&&(e+=" date-tooltip",i+=' data-tooltip="'+u[1]+'" data-tooltip-time="'+t+'"',"inherit"!==u[2]?a+='<span class="tooltip-tick" style="background:'+u[2]+';"></span>':a+='<span class="tooltip-tick"></span>'),c.push('<td class="'+e+'" '+i+">"+a+"</td>"),7==c.length&&(h.push("<tr>\n"+c.join("\n")+"\n</tr>"),c=[]),r.setDate(r.getDate()+1);return h="<tbody>"+h.join("\n")+"</tbody>",'<table class="calendar-days">'+this.weekdays+h+"</table>"},showTooltip:function(t,e,i){var a,n=this.con.tooltips[t].element,s=n.style,r=this.dt.querySelector(".calendar-datepicker");s.cssText="opacity:0;visibility:hidden;",n.id="tooltip-"+t+"-"+i,r.appendChild(n),a=n.offsetWidth,n.offsetHeight,s.top=e.offsetTop+e.offsetHeight+"px",s.left=e.offsetLeft+e.offsetWidth/2-a/2+"px",s.visibility="visible",this.con.animate?(n.setAttribute("data-top",parseInt(s.top)),s.top=parseInt(s.top)+5+"px",function t(){parseFloat(s.top)>n.getAttribute("data-top")&&(s.top=parseFloat(s.top)-.5+"px"),(s.opacity=parseFloat(s.opacity)+.125)<1&&setTimeout(t,20)}()):s.opacity=1},hideTooltip:function(t){var e=this.dt.querySelector("#tooltip-"+t),i=e.style;this.con.animate?(e.className+=" remove",function t(){if(parseFloat(i.top)<parseInt(e.getAttribute("data-top"))+5&&(i.top=parseFloat(i.top)+.5+"px"),(i.opacity-=.125)<0)return(e.className="calendar-tooltip")?e.parentElement.removeChild(e):"";setTimeout(t,20)}()):e.parentElement.removeChild(e)},switchView:function(t){var e=[null,"days","months","years","decades",null];return-1==e.indexOf(t)&&("up"==t?t=e[(e.indexOf(this.view.type)||5)+1]||null:"down"==t&&(t=e[(e.indexOf(this.view.type)||1)-1]||null),t&&this.con["view"+l(t)]||(t=!1)),!!t&&(this.renderDatePicker(this.dt,t),this.trigger("view",t))},switchDate:function(t,e,i,a){return"auto"===i&&(i=this.view.date.getDate(),(1===this.view.date.getMonth()&&i>=28||i>=30)&&(i=(i=new Date(t,e+1,0)).getDate())),this.view.date.setFullYear(null==t?this.view.date.getFullYear():t,null==e?this.view.date.getMonth():e,i||this.view.date.getDate()),!0===a||this.switchView(this.view.type)},switchMonth:function(t,e){return"string"==typeof t&&(t=["previous","prev"].indexOf(t)>=0?-1:1,t=this.view.date.getMonth()+type),this.switchDate(e||this.getFullYear(),t)},switchYear:function(t){return"string"==typeof t&&(t=["previous","prev"].indexOf(t)>=0?-1:1,t=this.view.date.getFullYear()+type),this.switchDate(t)},browseView:function(t){switch(t=["previous","prev"].indexOf(t)>=0?-1:1,this.view.type){case"days":return this.switchDate(null,this.view.date.getMonth()+t,"auto");case"months":return this.switchDate(this.view.date.getFullYear()+t,null,"auto");case"years":return this.switchDate(this.view.date.getFullYear()+10*t,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*t,null,"auto")}return!1},fetchDate:function(t){t=c(t||!1)||this.view.date;var e=this.dt.querySelectorAll("input[type=text]");return e&&3==e.length&&t.setHours(e[0].value||0,e[1].value||0,e[2].value||0,0),t},selectDate:function(t,e,i,a,n,s){var r=new Date,o=[];return this.con.dateFormat&&o.push(this.con.dateFormat),this.con.timeFormat&&o.push(this.con.timeFormat),this.select=t instanceof Date?t:new Date(t||(null==t?this.view.date.getFullYear():r.getFullYear()),e||(null==e?this.view.date.getMonth():r.getMonth()),i||(null==i?this.view.date.getDate():r.getDate()),a||(null==a?this.view.date.getHours():0),n||(null==n?this.view.date.getMinutes():0),s||(null==s?this.view.date.getSeconds():0)),this.view.date=new Date(this.select.getTime()),this.e.value=this.convertDate(this.select,o.join(" ")),this.e.setAttribute("data-value",this.select.getTime()),this.switchView("days"),this.dt.contains(document.activeElement)||this.renderTimePicker(this.dt),this.trigger("change")},selectTime:function(t,e,i){return this.selectDate(void 0,void 0,void 0,t,e,i)},open:function(){if(!i(this.dt,"calendar-close"))return this;var t=this,e=this.dt.style;return e.display="block",e.opacity=this.con.animate?0:1,n(this.dt,"calendar-close"),a(this.dt,"calendar-idle"),i(this.dt,"calendar-static")||t.calcPosition(),function i(){if((e.opacity=parseFloat(e.opacity)+.125)>=1)return n(t.dt,"calendar-idle"),a(t.dt,"calendar-open"),t.trigger("open");setTimeout(i,20)}(),this},close:function(){if(!i(this.dt,"calendar-open"))return this;var t=this,e=this.dt.style;return e.display="block",e.opacity=this.con.animate?1:0,n(this.dt,"calendar-open"),a(this.dt,"calendar-idle"),function i(){if((e.opacity-=.125)<=0)return n(t.dt,"calendar-idle"),a(t.dt,"calendar-close"),e.display="none",t.trigger("close");setTimeout(i,20)}(),this},toggle:function(){return i(this.dt,"calendar-open")?this.close():i(this.dt,"calendar-close")?this.open():this},on:function(t,e,i){return!(["open","close","change","view"].indexOf(t)<0||"function"!=typeof e)&&(t in this.events||(this.events[t]=[]),this.events[t].push({cb:e,args:i instanceof Array?i:[]}),this)},remove:function(){return this.e.removeAttribute("data-tail-datetime"),this.e.removeAttribute("data-value"),this.dt.parentElement.removeChild(this.dt),this},reload:function(){return this.remove(),this.init()},config:function(t,e,i){if(t instanceof Object){for(var a in t)this.config(a,t[a],!1);return this.reload(),this.con}return void 0===t?this.con:t in this.con&&(void 0===e?this.con[t]:(this.con[t]=e,!1!==this.rebuild&&this.reload(),this))}},h});