!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(e,e.document):(void 0===e.tail&&(e.tail={}),e.tail.DateTime=e.tail.datetime=t(e,e.document),"undefined"!=typeof jQuery&&(jQuery.fn.DateTime=jQuery.fn.datetime=function(e){var t,i=[];return this.each(function(){!1!==(t=tail.DateTime(this,e))&&i.push(t)}),1===i.length?i[0]:0!==i.length&&i}),"undefined"!=typeof MooTools&&(Element.implement({DateTime:function(e){return new tail.DateTime(this,e)}}),Element.implement({datetime:function(e){return new tail.DateTime(this,e)}})))}(window,function(e,t){"use strict";function i(e,t){return!!(e&&"classList"in e)&&e.classList.contains(t)}function a(e,t){return e&&"classList"in e?e.classList.add(t):void 0}function n(e,t){return e&&"classList"in e?e.classList.remove(t):void 0}function s(e,i,a){if(CustomEvent&&CustomEvent.name)var n=new CustomEvent(i,a);else(n=t.createEvent("CustomEvent")).initCustomEvent(i,!!a.bubbles,!!a.cancelable,a.detail);return e.dispatchEvent(n)}function r(e,t){if("function"==typeof Object.assign)return Object.assign({},e,t||{});var i=Object.constructor();for(var a in e)i[a]=a in t?t[a]:e[a];return i}function o(e,i){var a=t.createElement(e);return a.className=i&&i.join?i.join(" "):i||"",a}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e,t,i){var a=e instanceof Date?e:!!e&&new Date(e);return a instanceof Date&&!isNaN(a.getDate())&&(i&&a.setHours(0,0,0,0),!0===t?a.getTime():a)}t.forms.inputmode=!0;var d=function(e,i){if((e="string"==typeof e?t.querySelectorAll(e):e)instanceof NodeList||e instanceof HTMLCollection||e instanceof Array){for(var a=[],n=e.length,s=0;s<n;s++)a.push(new d(e[s],i));return 1===a.length?a[0]:0!==a.length&&a}if(!(e instanceof Element))return!1;if(!(this instanceof d))return new d(e,i);if(d.inst[e.getAttribute("data-tail-datetime")])return d.inst[e.getAttribute("data-tail-datetime")];if(e.getAttribute("data-datetime")){var o=JSON.parse(e.getAttribute("data-datetime").replace(/\'/g,'"'));o instanceof Object&&(i=r(i,o))}return this.e=e,this.id=++d.count,this.con=r(d.defaults,i),d.inst["tail-"+this.id]=this,this.e.setAttribute("data-tail-datetime","tail-"+this.id),this.init()};return d.version="0.4.14",d.status="beta",d.count=0,d.inst={},d.defaults={animate:!0,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,time12h:!1,timeFormat:"HH:ii:ss",timeHours:!0,timeMinutes:!0,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0},d.strings={ar:{months:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],days:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],shorts:["أحد","إثن","ثلا","أرب","خمي","جمع","سبت"],time:["ساعة","دقيقة","ثانية"],header:["إختر الشهر","إخنر السنة","إختر العقد","إختر الوقت"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],days:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],shorts:["NE","PO","ÚT","ST","ČT","PÁ","SO"],time:["Hodiny","Minuty","Sekundy"],header:["Vyberte měsíc","Vyberte rok","Vyberte desetiletí","Vyberte čas"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shorts:["SO","MO","DI","MI","DO","FR","SA"],time:["Stunden","Minuten","Sekunden"],header:["Wähle einen Monat","Wähle ein Jahr","Wähle ein Jahrzehnt","Wähle eine Uhrzeit"]},de_AT:{months:["Jänner","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shorts:["SO","MO","DI","MI","DO","FR","SA"],time:["Stunden","Minuten","Sekunden"],header:["Wähle einen Monat","Wähle ein Jahr","Wähle ein Jahrzehnt","Wähle eine Uhrzeit"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],days:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],shorts:["ΚΥΡ","ΔΕΥ","ΤΡΙ","ΤΕΤ","ΠΕΜ","ΠΑΡ","ΣΑΒ"],time:["Ώρες","Λεπτά","Δευτερόλεπτα"],header:["Επιλογή Μηνός","Επιλογή Έτους","Επιλογή Δεκαετίας","Επιλογή Ώρας"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shorts:["SUN","MON","TUE","WED","THU","FRI","SAT"],time:["Hours","Minutes","Seconds"],header:["Select a Month","Select a Year","Select a Decade","Select a Time"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shorts:["DOM","LUN","MAR","MIÉ","JUE","VIE","SÁB"],time:["Horas","Minutos","Segundos"],header:["Selecciona un mes","Seleccione un año","Seleccione un década","Seleccione una hora"]},es_MX:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shorts:["DO","LU","MA","MI","JU","VI","SÁ"],time:["Horas","Minutos","Segundos"],header:["Selecciona un Mes","Selecciona un Año","Selecciona una Decada","Selecciona la Hora"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],days:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],shorts:["Su","Ma","Ti","Ke","To","Pe","La"],time:["Tunnit","Minuutit","Sekuntit"],header:["Valitse kuukausi","Valitse vuosi","Valitse vuosikymmen","Valitse aika"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],shorts:["DIM","LUN","MAR","MER","JEU","VEN","SAM"],time:["Heure","Minute","Seconde"],header:["Choisissez un mois","Choisissez une année","Choisissez une décénie","Kies een Tijdstip"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],days:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],shorts:["MIN","SEN","SEL","RAB","KAM","JUM","SAB"],time:["Jam","Menit","Detik"],header:["Pilih Bulan","Pilih Tahun","Pilih Dekade","Pilih Jam"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shorts:["DOM","LUN","MAR","MER","GIO","VEN","SAB"],time:["Ore","Minuti","Secondi"],header:["Seleziona un mese","Seleziona un anno","Seleziona un decennio","Seleziona un orario"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shorts:["일","월","화","수","목","금","토"],time:["시","분","초"],header:["월 선택","연도 선택","연대 선택","시간 선택"]},nl:{months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],days:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],shorts:["ZO","MA","DI","WO","DO","VR","ZA"],time:["Uur","Minuten","Seconden"],header:["Kies een Maand","Kies een Jaar","Kies een Decennium","Kies een Tijdstip"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],shorts:["SØN","MAN","TIR","ONS","TOR","FRE","LØR"],time:["Timer","Minutter","Sekunder"],header:["Velg måned","Velg år","Velg tiår","Velg klokkeslett"]},pl:{months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shorts:["ND","PN","WT","ŚR","CZW","PT","SOB"],time:["Godzina","Minuta","Sekunda"],header:["Wybierz miesiąc","Wybierz rok","Wybierz dekadę","Wybierz czas"]},pt_BR:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shorts:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],time:["Horas","Minutos","Segundos"],header:["Escolha um mês","Escolha um ano","Escolha uma década","Escolha um horário"]},ru:{months:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shorts:["вс","пн","вт","ср","чт","пт","сб"],time:["часов","минут","секунд"],header:["Выберите месяц","Выберите год","Выберите Десятилетие","Выберите время"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shorts:["PA","PT","SA","ÇA","PE","CU","CT"],time:["Saat","Dakika","Saniye"],header:["Ay Seçin","Yıl Seçin","On Yıl Seçin","Zaman Seçin"]},modify:function(e,t,i){if(!(e in this))return!1;if(t instanceof Object)for(var a in t)this.modify(e,a,t[a]);else this[e][t]="string"==typeof i?i:this[e][t];return!0},register:function(e,t){return"string"==typeof e&&t instanceof Object&&(this[e]=t,!0)}},d.prototype={init:function(){this.prepare();var e=this.__.shorts.slice(this.con.weekStart).concat(this.__.shorts.slice(0,this.con.weekStart));this.weekdays="<thead>\n<tr>\n";for(var t=0;t<7;t++)this.weekdays+='<th class="calendar-week">'+e[t]+"</th>";this.weekdays+="\n</tr>\n</thead>",this.select=c(this.e.getAttribute("data-value")||this.e.value),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),null==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date});var i=["Hours","Minutes","Seconds"];for(t=0;t<3;t++)if("number"==typeof this.con["time"+i[t]])this.view.date["set"+i[t]](this.con["time"+i[t]]);else for(;this.view.date["get"+i[t]]()%this.con["timeStep"+i[t]]!=0;)this.view.date["set"+i[t]](this.view.date["get"+i[t]]()+1);return this.ampm=!!this.con.time12h&&this.view.date.getHours()>12,this.events={},this.dt=this.renderCalendar(),this.con.startOpen&&this.open(),this.select&&this.selectDate(this.select),this.bind()},prepare:function(){if(this.__=r(d.strings.en,d.strings[this.con.locale]||{}),this.con.dateStart=c(this.con.dateStart,!0,!0)||-9999999999999,this.con.dateEnd=c(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.dateFormat?this.con.viewDefault:"time","string"==typeof this.con.weekStart&&(this.con.weekStart=d.strings.en.shorts.indexOf(this.con.weekStart)),this.con.weekStart<0&&this.con.weekStart>6&&(this.con.weekStart=0),this.con.dateRanges.length>0){for(var e=[],i=(s=this.con.dateRanges).length,a=0;a<i;a++)s[a]instanceof Object&&(s[a].start||s[a].days)&&(!1===(s[a].start=c(s[a].start||!1,!0,!0))?s[a].start=s[a].end=1/0:(!1===(s[a].end=c(s[a].end||!1,!0,!0))&&(s[a].end=s[a].start),s[a].start=s[a].start>s[a].end?[s[a].end,s[a].end=s[a].start][0]:s[a].start),s[a].days=!("days"in s[a])||s[a].days,s[a].days="boolean"!=typeof s[a].days?function(e){for(var t=[],i=e.length,a=0;a<i;a++)"string"==typeof e[a]&&(e[a]=d.strings.en.shorts.indexOf(e[a])),e[a]>=0&&e[a]<=6&&t.push(e[a]);return t}(s[a].days instanceof Array?s[a].days:[s[a].days]):[0,1,2,3,4,5,6],e.push({start:s[a].start,end:s[a].end,days:s[a].days}));this.con.dateRanges=e}if(this.con.tooltips.length>0){e=[];var n,s,o=this.con.tooltips;for(i=o.length,a=0;a<i;a++)o[a]instanceof Object&&o[a].date&&(o[a].date instanceof Array?(n=c(o[a].date[0]||!1,!0,!0),s=c(o[a].date[1]||!1,!0,!0)||n):n=s=c(o[a].date||!1,!0,!0),n&&e.push({date:n!==s?[n,s]:n,text:o[a].text||"Tooltip",color:o[a].color||"inherit",element:o[a].element||(l=t.createElement("DIV"),l.className="calendar-tooltip",l.innerHTML='<div class="tooltip-inner">'+o[a].text||"Tooltip</div>",l)}));this.con.tooltips=e}var l;return this},bind:function(){var e=this;return void 0===this._bind&&(this.e.addEventListener("focusin",function(t){e.open.call(e)}),this.e.addEventListener("keyup",function(t){e.callback.call(e,t)}),t.addEventListener("keyup",function(t){e.dt.contains(t.target)&&e.callback.call(e,t)}),t.addEventListener("click",function(t){e.dt.contains(t.target)?e.callback.call(e,t):!e.e.contains(t.target)&&i(e.dt,"calendar-open")&&(t.target==e.dt||t.target==e.e||e.con.stayOpen||e.close.call(e))}),t.addEventListener("mouseover",function(t){e.dt.contains(t.target)&&e.callback.call(e,t)}),this._bind=!0),this},callback:function(e){var t,i=e.target,a="getAttribute",n="data-action",s=i[a](n)?i:i.parentElement[a](n)?i.parentElement:i,r="data-tooltip";if("mouseover"==e.type&&(!1!==(t=i[a](r)?i:!!s[a](r)&&s)?this.dt.querySelector("#tooltip-"+t[a](r)+"-"+t[a](r+"-time"))||this.showTooltip(t[a](r),t,t[a](r+"-time")):this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8))),"click"==e.type){if(!s||1!=e.buttons&&1!=(e.which||e.button))return;if(s.hasAttribute("data-disabled"))return;switch(s[a](n)){case"prev":case"next":return this.browseView(s[a](n));case"cancel":this.con.stayOpen||this.close();break;case"submit":return this.con.stayOpen||this.close(),this.selectDate(this.fetchDate(parseInt(s[a]("data-date"))));case"view":return this.switchDate(s[a]("data-year")||null,s[a]("data-month")||null,s[a]("data-day")||null),this.switchView(s[a]("data-view"))}}if("keyup"==e.type){if("INPUT"!=e.target.tagName&&e.target!==this.e&&/calendar-(static|close)/i.test(this.dt.className))return!1;13==(e.keyCode||e.which)&&(this.selectDate(this.fetchDate(this.select)),e.stopPropagation(),this.con.stayOpen||this.close()),27==(e.keyCode||e.which)&&(this.con.stayOpen||this.close())}},trigger:function(e){var t={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==e&&(s(this.e,"input",t),s(this.e,"change",t)),s(this.dt,"tail::"+e,t);for(var i=(this.events[e]||[]).length,a=0;a<i;a++)this.events[e][a].cb.apply(this,function(e,t,i){for(var a=t.length,n=0;n<a;++n)e[n-1]=t[n];return e[n]=i,e}(new Array(arguments.length),arguments,this.events[e][a].args));return!0},calcPosition:function(){var t=this.dt.style,i=e.getComputedStyle(this.dt),a=parseInt(i.marginLeft)+parseInt(i.marginRight),n=parseInt(i.marginTop)+parseInt(i.marginBottom),s=this.e.getBoundingClientRect().top,r=this.e.getBoundingClientRect().left,o=this.e.offsetWidth||0,l=this.e.offsetHeight||0;switch("fixed"!==i.getPropertyValue("position")&&(t.p.top+=e.scrollY,t.p.left+=-e.scrollX),t.visibility="hidden",this.con.position){case"top":var c=s-(this.dt.offsetHeight+n),d=r+o/2-(this.dt.offsetWidth/2+a/2);break;case"left":c=s+l/2-(this.dt.offsetHeight/2+n),d=r-(this.dt.offsetWidth+a);break;case"right":c=s+l/2-(this.dt.offsetHeight/2+n),d=r+o;break;default:c=s+l,d=r+o/2-(this.dt.offsetWidth/2+a/2)}return t.top=(c>=0?c:this.e.offsetTop)+"px",t.left=(d>=0?d:0)+"px",t.visibility="visible",this},convertDate:function(e,t){var i,a={H:String("00"+e.getHours()).toString().slice(-2),G:(i=e.getHours(),i%12?i%12:12),A:e.getHours()>=12?"PM":"AM",a:e.getHours()>=12?"pm":"am",i:String("00"+e.getMinutes()).toString().slice(-2),s:String("00"+e.getSeconds()).toString().slice(-2),Y:e.getFullYear(),y:parseInt(e.getFullYear().toString().slice(2)),m:String("00"+(e.getMonth()+1)).toString().slice(-2),M:this.__.months[e.getMonth()].slice(0,3),F:this.__.months[e.getMonth()],d:String("00"+e.getDate()).toString().slice(-2),D:this.__.days[e.getDay()],l:this.__.shorts[e.getDay()].toLowerCase()};return t.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,function(e){return 4==e.length||2==e.length?a[e.slice(-1)].toString().slice(-Math.abs(e.length)):1==e.length&&"0"==e[0]?a[e.slice(-1)].toString().slice(-1):a[e.slice(-1)].toString()}).replace(/(A|a|M|F|D|l)/g,function(e){return a[e]})},renderCalendar:function(){var e=["tail-datetime-calendar","calendar-close"],i=!0===this.con.classNames?this.e.className.split(" "):this.con.classNames;if(["top","left","right","bottom"].indexOf(this.con.position)<0){var a=t.querySelector(this.con.position);e.push("calendar-static")}(!0===this.con.rtl||["ar","he","mdr","sam","syr"].indexOf(this.con.rtl)>=0)&&e.push("rtl"),this.con.stayOpen&&e.push("calendar-stay"),(i="function"==typeof i.split?i.split(" "):i)instanceof Array&&(e=e.concat(i));var n=o("DIV",e),s=!1;if(n.id="tail-datetime-"+this.id,this.con.dateFormat?s='<span class="action action-prev" data-action="prev"></span><span class="label" data-action="view" data-view="up"></span><span class="action action-next" data-action="next"></span>':this.con.timeFormat&&(s='<span class="label"></span>'),n.innerHTML=s?'<div class="calendar-actions">'+s+"</div>":"",this.con.dateFormat&&this.renderDatePicker(n,this.con.viewDefault),this.con.timeFormat&&this.renderTimePicker(n),this.con.closeButton&&!a){var r=o("BUTTON","calendar-close"),l=this;r.addEventListener("click",function(e){e.preventDefault(),l.close()}),n.appendChild(r)}return(a||t.body).appendChild(n),n},renderDatePicker:function(e,i){if((!i||["decades","years","months","days"].indexOf(i)<0)&&(i=this.con.viewDays?"days":this.con.viewMonths?"months":this.con.viewYears?"years":!!this.con.viewDecades&&"decades"),!i||!this.con["view"+l(i)]||!this.con.dateFormat)return!1;var a=t.createElement("DIV");return a.className="calendar-datepicker calendar-view-"+i,a.innerHTML=this["view"+l(i)](),e.querySelector(".calendar-datepicker")?e.replaceChild(a,e.querySelector(".calendar-datepicker")):e.appendChild(a),this.view.type=i,this.handleLabel(e)},renderTimePicker:function(e){if(!this.con.timeFormat)return!1;var a,n,s=[],r=0;if(this.con.time12h){var l=this.view.date.getHours()>12?'checked="checked" ':"";s.push('<label class="timepicker-switch" data-am="AM" data-pm="PM"><input type="checkbox" value="1" data-input="PM" '+l+"/><span></span></label>")}for(var c in{Hours:0,Minutes:0,Seconds:0})!1!==this.con["time"+c]?((a=t.createElement("INPUT")).type="text",a.disabled=null===this.con["time"+c],a.setAttribute("min","Hours"===c&&this.con.time12h?"01":"00"),a.setAttribute("max","Hours"!==c?"60":this.con.time12h?"13":"24"),a.setAttribute("step",this.con["timeStep"+c]),a.setAttribute("value",(n=this.view.date["get"+c]())<10?"0"+n:n),a.setAttribute("pattern","d*"),a.setAttribute("inputmode","numeric"),a.setAttribute("data-input",c.toLowerCase()),s.push('<div class="timepicker-field timepicker-'+c.toLowerCase()+'">'+a.outerHTML+'<button class="picker-step step-up"></button><button class="picker-step step-down"></button><label>'+this.__.time[r++]+"</label></div>")):s.push((r++,null));var d=o("DIV","calendar-timepicker"),h=this;d.innerHTML=s.join("\n");var u=d.querySelectorAll("input");for(r=0;r<u.length;r++)"checkbox"!==u[r].type?(u[r].addEventListener("input",function(e){h.handleTime.call(h,this)}),u[r].addEventListener("keydown",function(e){var t=event.keyCode||event.which||0;if(38===t||40===t)return e.preventDefault(),h.handleStep.call(h,this,38===t?"up":"down"),!1})):u[r].addEventListener("change",function(e){h.handleTime.call(h,this)});for(u=d.querySelectorAll("button"),r=0;r<u.length;r++)u[r].addEventListener("mousedown",function(e){e.preventDefault();var t=this.parentElement.querySelector("input");return h.handleStep.call(h,t,i(this,"step-up")?"up":"down"),!1});var p=e.querySelector(".calendar-timepicker");return e[p?"replaceChild":"appendChild"](d,p),this.handleLabel(e)},handleTime:function(e){this.con.time12h&&"checkbox"===e.type&&(this.ampm=e.checked);var t=e.parentElement.parentElement;t=[t.querySelector("input[data-input=hours]")||{value:0},t.querySelector("input[data-input=minutes]")||{value:0},t.querySelector("input[data-input=seconds]")||{value:0}],this.selectTime(parseInt(t[0].value)+(this.ampm?12:0),parseInt(t[1].value),parseInt(t[2].value)),t[2].value=this.view.date.getSeconds(),t[1].value=this.view.date.getMinutes(),this.con.time12h?t[0].value=this.view.date.getHours()>12?this.view.date.getHours()-12:this.view.date.getHours():t[0].value=this.view.date.getHours()},handleStep:function(e,t,i){var a=null,n=parseInt(e.value),s=parseInt(e.getAttribute("min")),r=parseInt(e.getAttribute("max")),o=e.getAttribute("data-input"),l=parseInt(e.getAttribute("step"));if("up"===t?(a=n+l>=r||null,e.value=n+l>=r?13===r?1:0:n+l,this.ampm=!!this.con.time12h&&this.view.date.getHours()+1>=12):"down"===t&&(a=!(n-l<s)&&null,e.value=n-l<s?r-l:n-l,this.ampm=!!this.con.time12h&&this.view.date.getHours()-1<=0),e.value<10&&(e.value="0"+e.value),this.con.timeIncrement&&null!==a){var c=e.parentElement.previousElementSibling;c&&!1===c.disabled?this.handleStep(c.querySelector("input"),a?"up":"down",!0):"hours"==o&&this.view.date.setDate(this.view.date.getDate()+(a?1:-1))}if(void 0!==i&&!0===i)return!1;var d=e.parentElement.parentElement;if(this.selectTime(parseInt((d.querySelector("input[data-input=hours]")||{value:0}).value)+(this.ampm?12:0),parseInt((d.querySelector("input[data-input=minutes]")||{value:0}).value),parseInt((d.querySelector("input[data-input=seconds]")||{value:0}).value)),this.con.time12h){var h=e.parentElement.parentElement.querySelector("input[type=checkbox]");h&&h.checked!==this.view.date.getHours()>12&&(h.checked=this.view.date.getHours()>12)}return!0},handleLabel:function(e){var t,i,a=e.querySelector(".label");switch(this.view.type){case"days":t=this.__.months[this.view.date.getMonth()]+", "+this.view.date.getFullYear();break;case"months":t=this.view.date.getFullYear();break;case"years":t=(i=parseInt(this.view.date.getFullYear().toString().slice(0,3)+"0"))+" - "+(i+10);break;case"decades":t=(i=parseInt(this.view.date.getFullYear().toString().slice(0,2)+"00"))+" - "+(i+100);break;case"time":t=this.__.header[3]}return a.innerText=t,e},viewDecades:function(){var e=this.view.date.getFullYear(),t=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0;t.setFullYear(e-parseInt(e.toString()[3])-30);for(var a,n,s=[],r=[],o=1;o<=16;o++)a="calendar-decade"+(i>=t.getYear()&&i<=t.getYear()+10?" date-today":""),n='data-action="view" data-view="down" data-year="'+t.getFullYear()+'"',s.push('<td class="'+a+'" '+n+'><span class="inner">'+t.getFullYear()+" - "+(t.getFullYear()+10)+"</span></td>"),o>=4&&o%4==0&&(r.push("<tr>\n"+s.join("\n")+"\n</tr>"),s=[]),t.setFullYear(t.getFullYear()+10);return'<table class="calendar-decades"><thead><tr><th colspan="4">'+this.__.header[2]+"</th></tr></thead><tbody>"+r.join("\n")+"</tbody></table>"},viewYears:function(){var e=this.view.date.getFullYear(),t=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0;t.setFullYear(e-parseInt(e.toString()[3])-2);for(var a,n,s=[],r=[],o=1;o<=16;o++)a="calendar-year"+(t.getYear()==i?" date-today":""),n='data-action="view" data-view="down" data-year="'+t.getFullYear()+'"',s.push('<td class="'+a+'" '+n+'><span class="inner">'+t.getFullYear()+"</span></td>"),o>=4&&o%4==0&&(r.push("<tr>\n"+s.join("\n")+"\n</tr>"),s=[]),t.setFullYear(t.getFullYear()+1);return'<table class="calendar-years"><thead><tr><th colspan="4">'+this.__.header[1]+"</th></tr></thead><tbody>"+r.join("\n")+"</tbody></table>"},viewMonths:function(){var e=this.__.months,t=this.con.today?(new Date).getMonth():-1;t=this.view.date.getYear()==(new Date).getYear()?t:-1;for(var i,a,n=[],s=[],r=0;r<12;r++)i="calendar-month"+(t==r?" date-today":""),a='data-action="view" data-view="down" data-month="'+r+'"',n.push('<td class="'+i+'" '+a+'><span class="inner">'+e[r]+"</span></td>"),3==n.length&&(s.push("<tr>\n"+n.join("\n")+"\n</tr>"),n=[]);return'<table class="calendar-months"><thead><tr><th colspan="3">'+this.__.header[0]+"</th></tr></thead><tbody>"+s.join("\n")+"</tbody></table>"},viewDays:function(){var e,t,i,a,n,s,r=new Date(this.view.date.getTime()),o=(new Date).toDateString(),l=r.getMonth(),c=[],d=[],h=[0,[]],u=([].concat(this.con.tooltips),[0,0]);for(r.setHours(0,0,0,0),r.setDate(1),r.setDate(1-(r.getDay()-this.con.weekStart));d.length<6;)e=r.getTime(),s=[].concat(this.con.dateRanges),i='data-action="submit" data-date="'+r.getTime()+'"',t="calendar-day date-"+(r.getMonth()>l?"next":r.getMonth()<l?"previous":"current"),this.con.today&&o==r.toDateString()&&(t+=" date-today"),this.con.dateBlacklist&&(e<this.con.dateStart||e>this.con.dateEnd)?h=[e<this.con.dateStart?this.con.dateStart:1/0,[0,1,2,3,4,5,6],!0]:this.con.dateRanges.length>0?s.filter(function(t){return t.start==1/0||e>=t.start&&e<=t.end?(h=[t.end,t.days],!1):t.start>e},this):3==h.length&&(h=[0,[0,1,2,3,4,5,6]]),this.con.tooltips.length>0&&this.con.tooltips.filter(function(t,i){t.date instanceof Array?t.date[0]<=e&&t.date[1]>=e&&(u=[t.date[1],i,t.color]):t.date==e&&(u=[t.date,i,t.color])},this),u[0]<e&&(u=[0,0]),(n=h[0]>=e&&h[1].indexOf(r.getDay())>=0)&&this.con.dateBlacklist||!n&&!this.con.dateBlacklist?(t+=" date-disabled",i+=' data-disabled="true"'):0!==h[0]&&h[0]<=e&&(h=[0,[]]),this.select&&this.select.toDateString()==r.toDateString()&&(t+=" date-select"),a='<span class="inner">'+r.getDate()+"</span>",u[0]>0&&(t+=" date-tooltip",i+=' data-tooltip="'+u[1]+'" data-tooltip-time="'+e+'"',"inherit"!==u[2]?a+='<span class="tooltip-tick" style="background:'+u[2]+';"></span>':a+='<span class="tooltip-tick"></span>'),c.push('<td class="'+t+'" '+i+">"+a+"</td>"),7==c.length&&(d.push("<tr>\n"+c.join("\n")+"\n</tr>"),c=[]),r.setDate(r.getDate()+1);return d="<tbody>"+d.join("\n")+"</tbody>",'<table class="calendar-days">'+this.weekdays+d+"</table>"},showTooltip:function(e,t,i){var a,n=this.con.tooltips[e].element,s=n.style,r=this.dt.querySelector(".calendar-datepicker");s.cssText="opacity:0;visibility:hidden;",n.id="tooltip-"+e+"-"+i,r.appendChild(n),a=n.offsetWidth,n.offsetHeight,s.top=t.offsetTop+t.offsetHeight+"px",s.left=t.offsetLeft+t.offsetWidth/2-a/2+"px",s.visibility="visible",this.con.animate?(n.setAttribute("data-top",parseInt(s.top)),s.top=parseInt(s.top)+5+"px",function e(){parseFloat(s.top)>n.getAttribute("data-top")&&(s.top=parseFloat(s.top)-.5+"px"),(s.opacity=parseFloat(s.opacity)+.125)<1&&setTimeout(e,20)}()):s.opacity=1},hideTooltip:function(e){var t=this.dt.querySelector("#tooltip-"+e),i=t.style;this.con.animate?(t.className+=" remove",function e(){if(parseFloat(i.top)<parseInt(t.getAttribute("data-top"))+5&&(i.top=parseFloat(i.top)+.5+"px"),(i.opacity-=.125)<0)return(t.className="calendar-tooltip")?t.parentElement.removeChild(t):"";setTimeout(e,20)}()):t.parentElement.removeChild(t)},switchView:function(e){var t=[null,"days","months","years","decades",null];return-1==t.indexOf(e)&&("up"==e?e=t[(t.indexOf(this.view.type)||5)+1]||null:"down"==e&&(e=t[(t.indexOf(this.view.type)||1)-1]||null),e&&this.con["view"+l(e)]||(e=!1)),!!e&&(this.renderDatePicker(this.dt,e),this.trigger("view",e))},switchDate:function(e,t,i,a){return"auto"===i&&(i=this.view.date.getDate(),(1===this.view.date.getMonth()&&i>=28||i>=30)&&(i=(i=new Date(e,t+1,0)).getDate())),this.view.date.setFullYear(null==e?this.view.date.getFullYear():e,null==t?this.view.date.getMonth():t,i||this.view.date.getDate()),!0===a||this.switchView(this.view.type)},switchMonth:function(e,t){return"string"==typeof e&&(e=["previous","prev"].indexOf(e)>=0?-1:1,e=this.view.date.getMonth()+type),this.switchDate(t||this.getFullYear(),e)},switchYear:function(e){return"string"==typeof e&&(e=["previous","prev"].indexOf(e)>=0?-1:1,e=this.view.date.getFullYear()+type),this.switchDate(e)},browseView:function(e){switch(e=["previous","prev"].indexOf(e)>=0?-1:1,this.view.type){case"days":return this.switchDate(null,this.view.date.getMonth()+e,"auto");case"months":return this.switchDate(this.view.date.getFullYear()+e,null,"auto");case"years":return this.switchDate(this.view.date.getFullYear()+10*e,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*e,null,"auto")}return!1},fetchDate:function(e){e=c(e||!1)||this.view.date;var t=this.dt.querySelectorAll("input[type=text]");return t&&3==t.length&&e.setHours(t[0].value||0,t[1].value||0,t[2].value||0,0),e},selectDate:function(e,t,i,a,n,s){var r=new Date,o=[];return this.con.dateFormat&&o.push(this.con.dateFormat),this.con.timeFormat&&o.push(this.con.timeFormat),this.select=e instanceof Date?e:new Date(e||(null==e?this.view.date.getFullYear():r.getFullYear()),t||(null==t?this.view.date.getMonth():r.getMonth()),i||(null==i?this.view.date.getDate():r.getDate()),a||(null==a?this.view.date.getHours():0),n||(null==n?this.view.date.getMinutes():0),s||(null==s?this.view.date.getSeconds():0)),this.view.date=new Date(this.select.getTime()),this.e.value=this.convertDate(this.select,o.join(" ")),this.e.setAttribute("data-value",this.select.getTime()),this.switchView("days"),this.dt.contains(document.activeElement)||this.renderTimePicker(this.dt),this.trigger("change")},selectTime:function(e,t,i){return this.selectDate(void 0,void 0,void 0,e,t,i)},open:function(){if(!i(this.dt,"calendar-close"))return this;var e=this,t=this.dt.style;return t.display="block",t.opacity=this.con.animate?0:1,n(this.dt,"calendar-close"),a(this.dt,"calendar-idle"),i(this.dt,"calendar-static")||e.calcPosition(),function i(){if((t.opacity=parseFloat(t.opacity)+.125)>=1)return n(e.dt,"calendar-idle"),a(e.dt,"calendar-open"),e.trigger("open");setTimeout(i,20)}(),this},close:function(){if(!i(this.dt,"calendar-open"))return this;var e=this,t=this.dt.style;return t.display="block",t.opacity=this.con.animate?1:0,n(this.dt,"calendar-open"),a(this.dt,"calendar-idle"),function i(){if((t.opacity-=.125)<=0)return n(e.dt,"calendar-idle"),a(e.dt,"calendar-close"),t.display="none",e.trigger("close");setTimeout(i,20)}(),this},toggle:function(){return i(this.dt,"calendar-open")?this.close():i(this.dt,"calendar-close")?this.open():this},on:function(e,t,i){return!(["open","close","change","view"].indexOf(e)<0||"function"!=typeof t)&&(e in this.events||(this.events[e]=[]),this.events[e].push({cb:t,args:i instanceof Array?i:[]}),this)},remove:function(){return this.e.removeAttribute("data-tail-datetime"),this.e.removeAttribute("data-value"),this.dt.parentElement.removeChild(this.dt),this},reload:function(){return this.remove(),this.init()},config:function(e,t,i){if(e instanceof Object){for(var a in e)this.config(a,e[a],!1);return this.reload(),this.con}return void 0===e?this.con:e in this.con&&(void 0===t?this.con[e]:(this.con[e]=t,!1!==this.rebuild&&this.reload(),this))}},d});